<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Voter - Configuration de Partie</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/multi.css">
    <link rel="stylesheet" href="css/multi-forms.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="main-header">
            <div class="logo-section">
                <i class="fas fa-chess logo-icon"></i>
                <h1>Chess Voter</h1>
            </div>
            <div class="subtitle">Configuration de Partie</div>
        </header>

        <!-- √âtape 1 : S√©lection du mode -->
        <section id="modeSelection" class="config-step active">
            <h2 class="section-title">
                <span class="step-number">1</span>
                Choisissez votre mode de jeu
            </h2>
            
            <div class="mode-grid">
                <!-- Modes locaux -->
                <div class="mode-card" data-mode="sandbox">
                    <div class="mode-icon">üéØ</div>
                    <h3>Sandbox</h3>
                    <p>Mode libre classique o√π tous les viewers votent ensemble</p>
                    <span class="badge badge-local">LOCAL</span>
                </div>

                <div class="mode-card" data-mode="problems">
                    <div class="mode-icon">üß©</div>
                    <h3>Probl√®mes</h3>
                    <p>R√©solvez des puzzles tactiques avec le chat</p>
                    <span class="badge badge-local">LOCAL</span>
                </div>

                <div class="mode-card" data-mode="1vAll">
                    <div class="mode-icon">üë§</div>
                    <h3>Seul contre Tous</h3>
                    <p>Un joueur affronte tout le chat</p>
                    <span class="badge badge-local">LOCAL</span>
                </div>

                <div class="mode-card" data-mode="1v1">
                    <div class="mode-icon">‚öîÔ∏è</div>
                    <h3>Duel 1v1</h3>
                    <p>Deux joueurs s'affrontent directement</p>
                    <span class="badge badge-local">LOCAL</span>
                </div>

                <div class="mode-card" data-mode="viewersVsViewers">
                    <div class="mode-icon">üë•</div>
                    <h3>Viewers vs Viewers</h3>
                    <p>Division automatique par ID (pair/impair)</p>
                    <span class="badge badge-local">LOCAL</span>
                </div>

                <div class="mode-card" data-mode="multiplayer">
                    <div class="mode-icon">üåê</div>
                    <h3>Chat vs Chat Online</h3>
                    <p>Affrontez le chat d'un autre streameur</p>
                    <span class="badge badge-online">ONLINE</span>
                </div>

                <!-- Mode sp√©cial √† venir -->
                <div class="mode-card disabled" data-mode="puzzleRushMulti">
                    <div class="mode-icon">‚ö°</div>
                    <h3>Puzzle Rush Multi</h3>
                    <p>Mode comp√©titif de r√©solution rapide</p>
                    <span class="badge badge-soon">BIENT√îT</span>
                </div>

                <!-- Mode sp√©cial √† venir -->
                <div class="mode-card disabled" data-mode="PhantomChess">
                    <div class="mode-icon">‚ö°</div>
                    <h3>PhantomChess integration ?</h3>
                    <p>Int√©gration de l'√©chiquier automatique PhantomChess</p>
                    <span class="badge badge-soon">BIENT√îT</span>
                </div>
            </div>
        </section>

        <!-- √âtape 2 : Configuration sp√©cifique au mode -->
        <section id="modeConfig" class="config-step">
            <h2 class="section-title">
                <span class="step-number">2</span>
                <span id="modeConfigTitle">Configuration du mode</span>
            </h2>
            
            <!-- Configuration Sandbox (vide car pas d'options sp√©cifiques) -->
            <div id="config-sandbox" class="mode-config-panel">
                <div class="info-box">
                    <i class="fas fa-info-circle"></i>
                    <p>Mode sandbox standard - Configurez les options communes ci-dessous</p>
                </div>
            </div>

            <!-- Configuration Probl√®mes -->
            <div id="config-problems" class="mode-config-panel">
                <div class="form-group">
                    <label>Filtrage par th√®mes</label>
                    <div class="theme-controls">
                        <button type="button" class="btn btn-secondary" id="selectAllThemes">
                            <i class="fas fa-check-square"></i> Tout s√©lectionner
                        </button>
                        <button type="button" class="btn btn-secondary" id="clearThemes">
                            <i class="fas fa-times"></i> Effacer
                        </button>
                    </div>
                    <div class="problem-count">
                        <span>Probl√®mes disponibles : </span>
                        <strong id="availableProblems">-</strong>
                    </div>
                    <div id="themeList" class="theme-list">
                        <!-- G√©n√©r√© dynamiquement -->
                    </div>
                </div>
            </div>

            <!-- Configuration 1 vs All -->
            <div id="config-1vAll" class="mode-config-panel">
                <div class="form-group">
                    <label for="soloPlayerName">
                        <i class="fab fa-twitch"></i> Pseudo du joueur solo
                    </label>
                    <input type="text" id="soloPlayerName" class="form-control" placeholder="Nom du joueur Twitch">
                </div>
            </div>

            <!-- Configuration 1v1 -->
            <div id="config-1v1" class="mode-config-panel">
                <div class="form-group">
                    <label for="player1Name">
                        <i class="fas fa-chess-king"></i> Joueur 1 (Blancs)
                    </label>
                    <input type="text" id="player1Name" class="form-control" placeholder="Pseudo Twitch">
                </div>
                <div class="form-group">
                    <label for="player2Name">
                        <i class="fas fa-chess-king"></i> Joueur 2 (Noirs)
                    </label>
                    <input type="text" id="player2Name" class="form-control" placeholder="Pseudo Twitch">
                </div>
            </div>

            <!-- Configuration Viewers vs Viewers -->
            <div id="config-viewersVsViewers" class="mode-config-panel">
                <div class="info-box">
                    <i class="fas fa-info-circle"></i>
                    <p>Les viewers seront automatiquement r√©partis selon leur ID Twitch</p>
                    <ul>
                        <li>ID pairs ‚Üí √âquipe Blancs</li>
                        <li>ID impairs ‚Üí √âquipe Noirs</li>
                    </ul>
                </div>
            </div>

            <!-- Configuration Multiplayer -->
            <div id="config-multiplayer" class="mode-config-panel">
                <div class="multiplayer-role-selection">
                    <div class="role-card" data-role="host">
                        <i class="fas fa-crown"></i>
                        <h4>Cr√©er une partie</h4>
                        <p>H√©bergez et invitez un autre streameur</p>
                    </div>
                    <div class="role-card" data-role="join">
                        <i class="fas fa-sign-in-alt"></i>
                        <h4>Rejoindre une partie</h4>
                        <p>Connectez-vous avec un code</p>
                    </div>
                </div>

                <!-- Panneau Host -->
                <div id="host-panel" class="role-panel">
                    <div class="form-group">
                        <label for="hostStreamerName">
                            <i class="fab fa-twitch"></i> Votre nom de streameur
                        </label>
                        <input type="text" id="hostStreamerName" class="form-control" placeholder="VotreNomTwitch">
                    </div>
                    <button class="btn btn-primary" id="createGameBtn">
                        <i class="fas fa-plus"></i> Cr√©er la partie
                    </button>
                    
                    <div id="gameCreatedInfo" class="game-info-panel" style="display: none;">
                        <h4>‚úÖ Partie cr√©√©e !</h4>
                        <div class="info-row">
                            <span>Code de partie :</span>
                            <strong class="game-code" id="gameCode">XXXX</strong>
                        </div>
                        <div class="info-row">
                            <span>Statut :</span>
                            <span class="status status-waiting">En attente...</span>
                        </div>
                        <div class="url-section">
                            <label>Votre URL (Blancs) :</label>
                            <div class="url-box">
                                <span id="hostUrl">-</span>
                                <button class="btn-copy" data-target="hostUrl">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                        </div>
                        <div class="url-section">
                            <label>URL pour l'adversaire (Noirs) :</label>
                            <div class="url-box">
                                <span id="guestUrl">-</span>
                                <button class="btn-copy" data-target="guestUrl">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Panneau Join -->
                <div id="join-panel" class="role-panel">
                    <div class="form-group">
                        <label for="guestStreamerName">
                            <i class="fab fa-twitch"></i> Votre nom de streameur
                        </label>
                        <input type="text" id="guestStreamerName" class="form-control" placeholder="VotreNomTwitch">
                    </div>
                    <div class="form-group">
                        <label for="gameCodeInput">
                            <i class="fas fa-key"></i> Code de la partie
                        </label>
                        <input type="text" id="gameCodeInput" class="form-control game-code-input" 
                               placeholder="XXXX" maxlength="4">
                    </div>
                    <button class="btn btn-primary" id="joinGameBtn">
                        <i class="fas fa-sign-in-alt"></i> Rejoindre
                    </button>
                    
                    <div id="gameJoinedInfo" class="game-info-panel" style="display: none;">
                        <h4>‚úÖ Connect√© !</h4>
                        <div class="info-row">
                            <span>Statut :</span>
                            <span class="status status-connected">Pr√™t</span>
                        </div>
                        <div class="url-section">
                            <label>Votre URL (Noirs) :</label>
                            <div class="url-box">
                                <span id="playerUrl">-</span>
                                <button class="btn-copy" data-target="playerUrl">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- √âtape 3 : Options communes -->
        <section id="commonOptions" class="config-step">
            <h2 class="section-title">
                <span class="step-number">3</span>
                Options communes
            </h2>

            <!-- Timer et Vote -->
            <div class="option-group">
                <h3><i class="fas fa-clock"></i> Timer et Vote</h3>
                
                <div class="form-check">
                    <input type="checkbox" id="timerMode" class="form-check-input">
                    <label for="timerMode">Activer le mode timer</label>
                </div>

                <div id="timerOptions" class="sub-options">
                    <div class="form-group">
                        <label for="voteTime">Temps de vote par coup (secondes)</label>
                        <input type="number" id="voteTime" class="form-control" value="30" min="10" max="120">
                    </div>

                    <div class="form-group">
                        <label for="wheelAnimationTime">Dur√©e animation roue (secondes)</label>
                        <input type="number" id="wheelAnimationTime" class="form-control" value="3" min="1" max="10">
                    </div>

                    <div class="form-check">
                        <input type="checkbox" id="uniqueVote" class="form-check-input">
                        <label for="uniqueVote">Vote unique par viewer</label>
                    </div>

                    <div class="form-check">
                        <input type="checkbox" id="majorityMode" class="form-check-input" checked>
                        <label for="majorityMode">Mode majorit√© (sinon roue al√©atoire)</label>
                    </div>
                </div>
            </div>

            <!-- Restrictions -->
            <div class="option-group">
                <h3><i class="fas fa-lock"></i> Restrictions d'acc√®s</h3>
                
                <div class="form-check">
                    <input type="checkbox" id="followersOnly" class="form-check-input">
                    <label for="followersOnly">Followers uniquement</label>
                </div>

                <div class="form-check">
                    <input type="checkbox" id="subsOnly" class="form-check-input">
                    <label for="subsOnly">Abonn√©s uniquement</label>
                </div>
            </div>

            <!-- Visuels et Sons -->
            <div class="option-group">
                <h3><i class="fas fa-palette"></i> Visuels et Sons</h3>
                
                <div class="form-check">
                    <input type="checkbox" id="soundEnabled" class="form-check-input" checked>
                    <label for="soundEnabled">Activer les sons</label>
                </div>

                <div class="form-check">
                    <input type="checkbox" id="animationsEnabled" class="form-check-input" checked>
                    <label for="animationsEnabled">Activer les animations</label>
                </div>

                <div class="form-check">
                    <input type="checkbox" id="showBackground" class="form-check-input" checked>
                    <label for="showBackground">Afficher l'arri√®re-plan</label>
                </div>

                <div class="form-check">
                    <input type="checkbox" id="epilepsyMode" class="form-check-input">
                    <label for="epilepsyMode">Mode anti-√©pilepsie (moins d'effets)</label>
                </div>
            </div>

            <!-- Channel par d√©faut -->
            <div class="option-group">
                <h3><i class="fab fa-twitch"></i> Configuration Twitch</h3>
                <div class="form-group">
                    <label for="defaultChannel">Channel Twitch par d√©faut</label>
                    <input type="text" id="defaultChannel" class="form-control" placeholder="VotreChannel">
                </div>
            </div>
        </section>

        <!-- Boutons d'action -->
        <div class="action-buttons">
            <button id="prevBtn" class="btn btn-secondary" style="display: none;">
                <i class="fas fa-arrow-left"></i> Pr√©c√©dent
            </button>
            <button id="nextBtn" class="btn btn-primary" style="display: none;">
                Suivant <i class="fas fa-arrow-right"></i>
            </button>
            <button id="launchBtn" class="btn btn-success" style="display: none;">
                <i class="fas fa-play"></i> Lancer la partie
            </button>
        </div>
    </div>

    <!-- Toast notifications -->
    <div id="toast-container"></div>

    <!-- Scripts -->
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="js/multi-config.js"></script>
    <script src="js/multi-ui.js"></script>
    <script src="js/multi.js"></script>
</body>
</html>